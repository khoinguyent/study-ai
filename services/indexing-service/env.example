# Indexing Service Environment Configuration Example
# Copy this file to .env and update values as needed

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# PostgreSQL database connection string for the indexing service
DATABASE_URL=postgresql://user:password@localhost:5432/indexing_db

# Vector database configuration
VECTOR_DB_HOST=localhost
VECTOR_DB_PORT=6333
VECTOR_DB_NAME=studyai

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
# Redis connection string for caching and message broker
REDIS_URL=redis://redis:6379

# =============================================================================
# SERVICE URLs
# =============================================================================
# Document service endpoint for document processing
DOCUMENT_SERVICE_URL=http://document-service:8002
# Notification service endpoint for sending notifications
NOTIFICATION_SERVICE_URL=http://notification-service:8005

# =============================================================================
# VECTOR MODEL SETTINGS
# =============================================================================
# HuggingFace embedding model to use for vector generation
EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2
# HuggingFace API token for accessing models
HUGGINGFACE_TOKEN=

# =============================================================================
# CHUNKING CONFIGURATION
# =============================================================================
# Chunking mode: FIXED (legacy) or DYNAMIC (LaBSE-aware)
CHUNK_MODE=DYNAMIC

# Legacy fixed chunking parameters (used when CHUNK_MODE=FIXED)
CHUNK_SIZE=1000
CHUNK_OVERLAP=200

# Dynamic chunking parameters (used when CHUNK_MODE=DYNAMIC)
CHUNK_BASE_TOKENS=320
CHUNK_MIN_TOKENS=180
CHUNK_MAX_TOKENS=480
CHUNK_SENT_OVERLAP_RATIO=0.12

# LaBSE (Language-agnostic BERT Sentence Embedding) configuration
LABSE_MAX_TOKENS=512

# Density-based chunking weights
DENSITY_WEIGHT_SYMBOLS=0.4
DENSITY_WEIGHT_AVGWORD=0.3
DENSITY_WEIGHT_NUMBERS=0.3

# Enable hierarchical document structure analysis
DYNAMIC_HIERARCHY_ENABLE=false

# PDF Processing Configuration
PDF_OCR_ENABLED=true
PDF_OCR_LANG=vie+eng
PDF_OCR_DPI=300

# =============================================================================
# SERVICE CONFIGURATION
# =============================================================================
# Service name for identification
SERVICE_NAME=indexing-service
# Service port for HTTP server
SERVICE_PORT=8003

# =============================================================================
# ENVIRONMENT CONFIGURATION
# =============================================================================
# Current environment (local, development, staging, production)
ENVIRONMENT=local
# Infrastructure provider (local, aws, gcp, azure)
INFRASTRUCTURE_PROVIDER=local

# =============================================================================
# MESSAGE BROKER CONFIGURATION
# =============================================================================
# Type of message broker (redis, elasticache, sqs)
MESSAGE_BROKER_TYPE=redis

# =============================================================================
# TASK QUEUE CONFIGURATION
# =============================================================================
# Type of task queue (celery, sqs)
TASK_QUEUE_TYPE=celery

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# =============================================================================
# AWS CONFIGURATION (for cloud deployment)
# =============================================================================
# AWS region for cloud services
AWS_REGION=us-east-1
# AWS access key ID
AWS_ACCESS_KEY_ID=
# AWS secret access key
AWS_SECRET_ACCESS_KEY=

# =============================================================================
# S3 CONFIGURATION (for cloud deployment)
# =============================================================================
# S3 bucket for document storage
S3_BUCKET=study-ai-documents
# S3 region
S3_REGION=us-east-1
# S3 access key ID
S3_ACCESS_KEY_ID=
# S3 secret access key
S3_SECRET_ACCESS_KEY=

# =============================================================================
# MONITORING AND OBSERVABILITY
# =============================================================================
# Enable CloudWatch logging (for AWS deployment)
CLOUDWATCH_LOG_GROUP=/aws/study-ai
# CloudWatch region
CLOUDWATCH_REGION=us-east-1
# Enable X-Ray tracing
XRAY_ENABLED=false
